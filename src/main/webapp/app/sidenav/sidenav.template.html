<md-sidenav class="md-sidenav-left" md-component-id="left" md-is-locked-open="$mdMedia('gt-md')" md-whiteframe="4">
  <!-- Sidenav header -->
  <md-toolbar class="md-primary md-hue-3 my-sidenav-toolbar">
    <div ng-show="$ctrl.isLoggedIn">
      <div layout="row" layout-align="start center">

        <a ng-href="/user/uid/{{$ctrl.tokenBody.sub}}" ng-attr-title="Visit your profile...">
          <img ng-src="{{$ctrl.profileImage.imgUri || 'resources/img/users/default-user-img.png'}}" class="my-avatar" alt="{{$ctrl.tokenBody.username}}"/>
        </a>

        <span flex></span>

        <!-- Dropdown button -->
        <md-menu md-position-mode="target-left bottom">
          <md-button class="md-icon-button" ng-click="$mdMenu.open($event)">
            <md-icon md-font-set="material-icons"> arrow_drop_down </md-icon>
          </md-button>

          <md-menu-content width="3">

            <md-menu-item>
              <md-button href="/settings">
                <md-icon md-font-set="material-icons"> settings </md-icon>Settings
              </md-button>
            </md-menu-item>

            <md-menu-item>
              <md-button ng-click="$ctrl.logout()">
                <md-icon md-font-set="material-icons"> exit_to_app </md-icon>Log out
              </md-button>
            </md-menu-item>

          </md-menu-content>
        </md-menu>

      </div>

      <span flex></span>

      <!-- User Info -->

      <a ng-href="/user/uid/{{$ctrl.tokenBody.sub}}" ng-attr-title="Visit your profile...">
        <div class="my-user-info">
          <div class="md-body-3">{{$ctrl.tokenBody.name}}&nbsp;{{$ctrl.tokenBody.surname}}</div>
          <div class="md-body-2">@{{$ctrl.tokenBody.username}}</div>
          <div class="md-body-1">{{$ctrl.tokenBody.email}}</div>
        </div>
      </a>
    </div>

    <div ng-show="!$ctrl.isLoggedIn">
      <md-list>
        <md-list-item class="md-2-line" role="link" ng-href="/auth/0" ng-attr-title="Register a new account..." md-ink-ripple>

          <md-icon md-font-set="material-icons" class="my-navlink-icon"> add </md-icon>
          <div class="md-list-item-text">
            <span flex class="md-body-2">Register</span>
          </div>

        </md-list-item>

        <md-divider></md-divider>

        <md-list-item class="md-2-line" role="link" ng-href="/auth/1" ng-attr-title="Log into your account..." md-ink-ripple>

          <md-icon md-font-set="material-icons" class="my-navlink-icon"> account_circle </md-icon>
          <div class="md-list-item-text">
            <span flex class="md-body-2">Log In</span>
          </div>

        </md-list-item>
      </md-list>

    </div>

  </md-toolbar>

  <!-- Sidenav nav links -->

  <md-list>
    <md-list-item class="md-2-line" ng-repeat="navlink in $ctrl.navlinks" role="link" ng-href="{{navlink.url}}" ng-attr-title="{{navlink.info}}" ng-if="navlink.working" md-ink-ripple>

      <md-icon md-font-set="material-icons" class="my-navlink-icon"> {{navlink.icon}} </md-icon>
      <div class="md-list-item-text">
        <span flex class="md-body-2">{{navlink.title}}</span>
      </div>

    </md-list-item>

    <br>

    <md-divider></md-divider>

    <div class="my-list-header"> Missing Functionality </div>
    <md-list-item class="md-2-line missing-navlink" ng-repeat="navlink in $ctrl.navlinks" role="link" ng-href="{{navlink.url}}" ng-attr-title="{{navlink.info}}" ng-if="!navlink.working" md-ink-ripple>

      <md-icon md-font-set="material-icons" class="my-navlink-icon"> {{navlink.icon}} </md-icon>
      <div class="md-list-item-text">
        <span flex class="md-body-2">{{navlink.title}}</span>
      </div>

    </md-list-item>

    <md-list-item class="md-2-line legal-disclaimer-container" role="link" ng-href="#" ng-attr-title="Legal Notice" md-ink-ripple>

      <md-icon md-font-set="material-icons" class="my-navlink-icon"> info_outline </md-icon>
      <div class="md-list-item-text">
        <span flex class="md-body-2 legal-disclaimer-text">All logos, trademarks, design rights or similar rights are property of their respective owners.</span>
      </div>

    </md-list-item>
  </md-list>
</md-sidenav>
